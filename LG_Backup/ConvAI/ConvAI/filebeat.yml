

###################### Filebeat Configuration Example #########################

# ============================== Filebeat inputs ===============================

filebeat.inputs:
# Each - is an input. Most options can be set at the input level, so
# you can use different inputs for various configurations.
# Below are the input specific configurations.
#
- type: log
  enabled: true
  paths:
    #- /home/ubuntu/cloudpdk-rest/logs/*.log
    #- /log/*.log'
    - /var/lib/docker/volumes/knowledge-management-system_log/_data"/*.log
  multiline:
    pattern: '^[0-9]{4}-[0-9]{2}-[0-9]{2}[[:space:]][0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}[[:space:]]\['
    negate: true
    match: after

# ============================== Filebeat modules ==============================
filebeat.config.modules:
  # Glob pattern for configuration loading
  path: ${path.config}/modules.d/*.yml
  # Set to true to enable config reloading
  reload.enabled: false
  # Period on which files under path should be checked for changes
  #reload.period: 10s

# ======================= Elasticsearch template setting =======================
setup.template.settings:
  index.number_of_shards: 1
  #index.codec: best_compression
  #_source.enabled: false

# ================================== General ===================================
# The name of the shipper that publishes the network data. It can be used to group
# all the transactions sent by a single shipper in the web interface.
#name:

# The tags of the shipper are included in their own field with each
# transaction published.
#tags: ["service-X", "web-tier"]

# Optional fields that you can specify to add additional information to the
# output.
fields:
  env: dev
  service: aiefw

# ================Index Lifecycle Management ===================================
setup.ilm.enabled: auto
setup.ilm.rollover_alias: 'filebeat-functionbeat-aiefw'
setup.ilm.pattern: "{now/M{yyyy.MM}}-000001"
setup.ilm.policy_name: "filebeat_functionbeat_policy"
#setup.ilm.check_exists: false
#setup.ilm.overwrite: true

# ================================== Outputs ===================================
# Configure what output to use when sending the data collected by the beat.
output.console:
  enabled: false
  codec.json:
    pretty: true

# =============================== Elastic Cloud ================================
cloud.id: "thinqai-observability-dev:YXAtbm9ydGhlYXN0LTIuYXdzLmVsYXN0aWMtY2xvdWQuY29tOjkyNDMkMjdhNWZjNjEwNWY2NDEyMzk3NzgyYjJjMTVlYWZiODIkNjQzNzY0ZjMyNTE4NGJiNDlmY2FlNDVjMzBmYWFlZmY="
# ---------------------------- Elasticsearch Output ----------------------------
output.elasticsearch:
  enabled: true
  api_key: "LlsHDHkBdrAydfkSLs-N:FY7vpyIKRyOZjUYRBGOWZA"
  pipeline: "cloud-pdk-django"

# ============================= X-Pack Monitoring ==============================
# Filebeat can export internal metrics to a central Elasticsearch monitoring
# cluster.  This requires xpack monitoring to be enabled in Elasticsearch.  The
# reporting is disabled by default.
monitoring:
  enabled: true
  cloud.id: "monitoring:YXAtbm9ydGhlYXN0LTIuYXdzLmVsYXN0aWMtY2xvdWQuY29tOjkyNDMkOGJkYzI3OTZiOGU0NDBkYWFkNTA4YWQ3ZDk3NWUzNGQkOTYzM2I4YTE0MjcwNGE1YmIyMWJjMzM0OWM0ODBhYmI="
  elasticsearch:
    api_key: "K2E5DHkBdeqibEUbqIBA:wIFYNgTLQSC3uSjr6Q8B0g"


# ================================= Processors =================================
processors:
  - add_host_metadata:
      when.not.contains.tags: forwarded
  - add_cloud_metadata: ~
  - add_docker_metadata: ~
  - add_kubernetes_metadata: ~


